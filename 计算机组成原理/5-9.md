



# 5.存储器

## 5.1存储体系概述

### 5.1.1存储器的分类

#### 1.按介质分

1. 磁盘（硬盘）
2. 光盘

#### 2.按存取方法存取

1. 随机存取
2. 顺序存取（存储的时间与存储的位置有关）

####  3.按功能分



#### 4.

1. rom(只读)
2. 易失性 ram

#### 5.按在计算机中的作用分类

1. 主存储器
2. 辅助存储器

#### 6.主存储器的分类

1. prom

2. eprom eeprom 散存

3. rom

   

4. ram 

   1. sram (高速缓存)
   2. dram

#### 7.辅存的分类



### 5.1.2存储器的性能指标

#### 存储容量

存储单元个数*每个存储单元的二进制位数

#### 存储周期

#### 存储时间

*一次存储操作的时间*

#### 存储的带宽

*每次可存储多少位*

#### 存储的价格

*存储的每位价格*

#### 存储的功耗

存储的功耗与存储器的大小有关 ，越低越好

#### 存储器的可靠性





###  5.1.3存储器的层次结构

![存储器的层次结构](5-9.assets/存储器的层次结构.jpg)



## 5.2 主存储器

### 特点：

通过地址总线（AB) 控制总线（CB）数据总线（DB）

### 5.2.1 随机读取存储器 RAM

#### sram

1. 存储位元

2. 译码方式

   1. 线性译码
   2. 双向译码

3. 2114SRAM

   1. 片选信号

4. 特点

   相对性比较，用作cache

   断电时信息不保存

#### dram

1. 存储位元

   双稳态

   由于电容有漏电特性，（经过一定时间）就要不断充电（刷新）

2. 结构

   （电路结构图）行列地址双向译码

   行地址和列地址分时复用

3.  读写过程

   时序图

4. 刷新：（只要行地址）

   刷新周期

   对于多个芯片：所有行同时进行刷新（选中所有芯片）

   单元刷新间隔时间：对于电容中的电荷最大保存时间（信息保存的最长时间）

   刷新方式

   1. 集中式刷新

      刷新时间（死区：cpu无法进行操作）

   2. 分散式刷新

      刷新周期缩短刷新时间变长

   3. 移步式

      混合式

5. dram 的特点

   功耗大--》集成度小（做为主存）

   速度较慢--需要刷新，行列复用

### 5.2.2 ROM

### 5.2.3 高性能的主存储器

edram

cdram

edo ram

dsram	

rdram

ddr (ddr sdram)



## 5.3 主存储器与cpu的连接

### 5.3.1 存储芯片简介

1. sram的引脚
2. dram的引脚
3. rom芯片的引脚

### 5.3.2 存储器的扩展

1. 位扩展

   要点：

2. 字扩展

   存储容量的扩展

   有片选信号

3. 字位扩展

### 5.3.3 cpu与主存储器的连接

1.主要步骤

1. 根据cpu提供的地址线数目，确定访存的地址范围，并写出相应的二进制地址码
2. 根据地址范围的容量，确定各种类型芯片的数目和扩展方法
3. 分配cpu地址线，高位位片选信号
4. 连接数据线，R/W# 等其他信号，MREQ#一般可用作地址译码的使能信 号。（24译码器，38译码器 # :代表低电平有效等于上面写一横线）

2.解释

1. 38译码器三个输入端（能组成8种片选信号）8个输出信号低电平有效直接输出某一个片有效的信号（直接输入到某一片存储芯片）。

3.问题

1. 有若干片 的256\*sram芯片，要构成2048k\*32位的芯片问：

   1. 要多少片的芯片？
   2. 存储器要多少根的地址线？
   3. 画出cpu的连接口信号？

2. 注意：**地址线的数量和位数是无关的**

3. 0000H~3FFFH rom区  4000H~5FFFH保留区 6000H~FFFFH ram区

   按不同条件求分配方案？

   注意如果采用4k这种芯片（不是8k一组的情况）。

4. 

## 5.4高速存储器

解决cpu与主存储器的速度差异

### 5.4.1 双端口存储器

特点

结构特点

访问冲突

解决办法

逻辑框图

### 5.4.2 多体交叉存储器



特点

结构特点

编制方法

1. 顺序编址
2. 交叉编址（低位决定片选）

访问

适合采用流水线工作

多体交叉的时序

### 5.4.3 相连存储器

**按内容快速查询**

结构特点

## 5.5  高速缓存cache

一般由sram组成

基于程序访问的局部性原理

cache里的内容是程序的副本

cache的功能都是由硬件组成

cache原理图

### cache的读写操作

1. 命中和不明中（读命中，写命中）
2. 不明中时的解决方法
3. cache的命中率，失效率，平均访问时间
   1. cache命中率的相关条件

### 主存与cache之间的映射方式

直接映射（多对一(主存)对（cache））

简单但是不灵活命中率比较低

全相联映射（多对多）

组相联映射（组内全相联组件直接映射）

1. 通常采用 2路4路8路

cache的替换算法

* 随机替换
* fifo
* 最近最少使用算法（用的最多）

cache的多层次设计

1. 指令和数据使用同一个还是分开？(统一的效率较高)
2. 一级cache?多级cache?

## 5.6虚拟存储器，外存储器与存储保护

由硬件和软件共同实现

逻辑地址（虚拟地址）

### 虚拟存储的方式

段式虚拟管理

1. 段表（将虚拟地址转换为真实地址）
2. 段式虚拟存储器
3. 缺点：段长是固定的容易造成碎片

页式虚拟存储器

1. 页表

段页式虚拟存储器

1. 段表和页表
2. 普遍采用

### 辅助存储器

常见的辅助存储器

磁盘存储器

1. 磁盘控制器
2. 磁盘驱动器
3. 磁盘盘片

软盘（塑料底）

* 价格低，重量轻

硬盘

1. 采用温切斯特技术
2. 柱面号，磁头号，扇区号
3. 接口
   1. sasr接口小型计算机接口
4. 磁盘容量的计算

RAID磁盘冗余阵列（存储大量数据）

1. 七个等级（等级之间的特性不同）
2. 用多个小的硬盘组成能够存储大容量的硬盘阵列
3. 热交换能力（用户可以将坏的驱动器替换）

光盘：

1. cdrom
2. 接口ide ，eide

闪存盘：

1. u盘

### 存储保护

1. 存储区域保护
   1. 采用段表页表
   2. 键式保护
   3. 换保护（将程序分为环层级）
2. 访问方式保护

### cache架构

1. p6微架构的cache
   1. 采用两路
2. Intel NetBurst微架构下的Cache















