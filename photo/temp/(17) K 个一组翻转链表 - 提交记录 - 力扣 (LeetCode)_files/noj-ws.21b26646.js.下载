(window["__LOADABLE_LOADED_CHUNKS__"]=window["__LOADABLE_LOADED_CHUNKS__"]||[]).push([[7],{"6/5F":function(e,n,t){"use strict";var i=t("D57K");var o=t("MMod");var r=t.n(o);var a=t("d9YI");var u=t("pN2L");var s=t("9jpk");var c=t("cr/0");var f=t("JpoA");var v=t("4HYP");var m=t("AouM");var l=t("Jg5f");var d=t("ABDk");var p=t("Njp8");var h=t("5Nzd");var k=t("B07F");var b=t("s4wv");var y=t.n(b);var _="";var g=5*60*1e3;var w=function(e){var n=Object(i["i"])(e.split("."),2),t=n[1];var o=atob(t);var r=JSON.parse(o).expiredAt;return+new Date(r)};var O=function(){var e=+new Date;if(!_||e-w(_)>=g){var n=h["b"].getInstance(k["a"]);return n.query({query:y.a}).pipe(Object(l["a"])(function(e){var n=e.data;return n.userStatus.socketToken})).toPromise()}else{return Promise.resolve(_)}};var R=function(){function e(e){if(e===void 0){e=d["c"].Default}this.namespace=e;this.socket=r()(""+"https://ws.leetcode-cn.com"+this.namespace)}e.prototype.getToken=function(){return O()};e.prototype.setExceptionCallback=function(e){this.socket.on("exception",e)};e.prototype.joinRoom=function(t,n){var o=this;if(n){this.getToken().then(function(e){return o.socket.emit(d["a"].JoinRoom,{token:e,roomId:t},n)})}else{return new Promise(function(n){return o.getToken().then(function(e){return o.socket.emit(d["a"].JoinRoom,{token:e,roomId:t},function(e){return n(e)})})})}};e.prototype.joinMyRoom=function(n){var t=this;if(n){this.getToken().then(function(e){return t.socket.emit(d["a"].JoinMyRoom,{token:e},n)})}else{return new Promise(function(n){return t.getToken().then(function(e){return t.socket.emit(d["a"].JoinMyRoom,{token:e},function(e){return n(e)})})})}};e.prototype.leaveRoom=function(e,n){var t=this;if(n){this.socket.emit(d["a"].LeaveRoom,e,n)}else{return new Promise(function(n){return t.socket.emit(d["a"].LeaveRoom,e,function(e){return n(e)})})}};e.prototype.pushMessage=function(t,n){var o=this;if(n){this.getToken().then(function(e){return o.socket.emit(d["a"].PushMessageFromClient,Object(i["a"])(Object(i["a"])({},t),{token:e}),n)})}else{return new Promise(function(n){return o.getToken().then(function(e){return o.socket.emit(d["a"].PushMessageFromClient,Object(i["a"])(Object(i["a"])({},t),{token:e}),function(e){return n(e)})})})}};e.prototype.getMessages=function(e){this.socket.on(Object(p["b"])(this.namespace),e)};e.prototype.observeRoomEvent=function(e,n){return this.observeRoomAndListen(this.observeJoinRoom(e),n)};e.prototype.observeMyRoomEvent=function(e){return this.observeRoomAndListen(this.observeJoinMyRoom(),e)};e.prototype.observeRoomAndListen=function(e,t){var n=this;return this.observeRoom(e).pipe(Object(v["a"])(function(){return n.observeGetMessagesEvent()}),Object(m["a"])(function(e){var n;try{n=JSON.parse(e)}catch(e){return a["a"]}if(n.type===t)return Object(u["a"])(n);return a["a"]}))};e.prototype.observeJoinMyRoom=function(){var n=this;return Object(s["a"])(function(e){return n.joinMyRoom(e)})()};e.prototype.observeJoinRoom=function(e){var t=this;return Object(s["a"])(function(e,n){return t.joinRoom(e,n)})(e)};e.prototype.observeGetMessagesEvent=function(){var n=this;return Object(c["a"])(function(e){return n.getMessages(e)})};e.prototype.observeRoom=function(e){return e.pipe(Object(l["a"])(function(e){if(e&&e.status!==d["d"].OK)Object(f["a"])(e.message);return e}))};return e}();var S=n["a"]=R},ABDk:function(e,n,t){"use strict";var o;(function(e){e["Unknown"]="___unknown___";e["SubmissionResult"]="submission-result";e["WatchQueryResult"]="watchQuery-result";e["Message"]="message";e["JoinRoom"]="client:join-room";e["JoinMyRoom"]="client:join-my-room";e["LeaveRoom"]="client:leave-room";e["SubscribeQuery"]="client:subscribe-query";e["PushMessageFromClient"]="client:push"})(o||(o={}));var r;(function(e){e["Unknown"]="___unknown____";e["AssessmentBehaviorCollect"]="assessment-behavior"})(r||(r={}));var i;(function(e){e["REFETCH_NOTIFICATION_NUM"]="REFETCH_NOTIFICATION_NUM"})(i||(i={}));var a;(function(e){e["WatchDog"]="/watch-dog";e["Default"]="/"})(a||(a={}));var u;(function(e){e["Unknown"]="___unknown___";e["Default"]="default";e["User"]="user";e["GraphqlQuery"]="graphql-query"})(u||(u={}));var s;(function(e){e["OK"]="ok"})(s||(s={}));t.d(n,"a",function(){return o});t.d(n,"b",function(){return i});t.d(n,"c",function(){return a});t.d(n,"e",function(){return u});t.d(n,"d",function(){return s})},Njp8:function(e,n,t){"use strict";var o=t("ABDk");function r(e,n){return"["+e+"]"+n}function i(e){return o["e"].Default+"::"+(e||0)}function a(e){return r(e,o["e"].User+"::"+e)}function u(e,n){if(/[:[\]]/.test(e)){throw new Error("Unexpected queryHash: "+e)}var t=o["e"].GraphqlQuery+"::"+e;return n?r(n,t):t}var s=function(e){if(e===o["c"].WatchDog)return o["a"].WatchQueryResult;return o["a"].Message};t.d(n,"a",function(){return i});t.d(n,"b",function(){return s})},s4wv:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userStatus"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"socketToken"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:55}};t.loc.source={body:"query userStatus {\n  userStatus {\n    socketToken\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var o={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var n=e.name.value;if(o[n]){return false}else{o[n]=true;return true}})}function i(e,n){if(e.kind==="FragmentSpread"){n.add(e.name.value)}else if(e.kind==="VariableDefinition"){var t=e.type;if(t.kind==="NamedType"){n.add(t.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){i(e,n)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){i(e,n)})}if(e.definitions){e.definitions.forEach(function(e){i(e,n)})}}var u={};(function e(){t.definitions.forEach(function(e){if(e.name){var n=new Set;i(e,n);u[e.name.value]=n}})})();function s(e,n){for(var t=0;t<e.definitions.length;t++){var o=e.definitions[t];if(o.name&&o.name.value==n){return o}}}function a(t,e){var o={kind:t.kind,definitions:[s(t,e)]};if(t.hasOwnProperty("loc")){o.loc=t.loc}var n=u[e]||new Set;var r=new Set;var i=new Set;n.forEach(function(e){i.add(e)});while(i.size>0){var a=i;i=new Set;a.forEach(function(e){if(!r.has(e)){r.add(e);var n=u[e]||new Set;n.forEach(function(e){i.add(e)})}})}r.forEach(function(e){var n=s(t,e);if(n){o.definitions.push(n)}});return o}e.exports=t;e.exports["userStatus"]=a(t,"userStatus")}}]);